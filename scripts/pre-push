#!/bin/bash
# Git pre-push hook - runs automatically before git push
# Install by: cp scripts/pre-push .git/hooks/pre-push

echo "ğŸ” Running pre-push checks..."

# Change to project root
PROJECT_ROOT="$(cd "$(dirname "$0")/.." && pwd)"
cd "$PROJECT_ROOT"

# Run backend lint checks
echo "ğŸ“¦ Checking backend..."
cd backend

echo "  Running black..."
black --line-length 100 app/ tests/ alembic/
echo "  âœ… Black passed"

echo "  Running isort..."
isort --check-only app/ tests/ alembic/
echo "  âœ… isort passed"

echo "  Running flake8..."
flake8 --config .flake8 .
echo "  âœ… flake8 passed"

cd ../frontend

echo "ğŸ¨ Checking frontend..."
echo "  Running npm lint..."
npm run lint
echo "  âœ… Frontend lint passed"

echo "  Running npm build..."
npm run build
echo "  âœ… Frontend build passed"

echo ""
echo "âœ… All pre-push checks passed! Ready to push..."
